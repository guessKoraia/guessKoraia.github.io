<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KORAIA í†µí•© ë””ìì¸ ì„¼í„° v3.1</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <style>
        :root { --primary-color: #1a3c34; --sns-bg-color: #333333; }
        body { font-family: 'Pretendard', sans-serif; background: #f4f4f7; margin: 0; display: flex; flex-direction: column; align-items: center; color: #333; }

        /* íƒ­ ë©”ë‰´ */
        .nav-tabs { display: flex; gap: 10px; margin-top: 40px; background: #e2e8f0; padding: 8px; border-radius: 16px; }
        .tab-btn { padding: 12px 30px; border: none; border-radius: 12px; font-weight: 700; cursor: pointer; transition: 0.3s; background: transparent; color: #64748b; font-size: 15px; }
        .tab-btn.active { background: white; color: var(--primary-color); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }

        /* ê³µí†µ ë ˆì´ì•„ì›ƒ */
        .tool-container { display: none; width: 100%; max-width: 1250px; padding: 40px 20px; animation: fadeIn 0.3s; }
        .tool-container.active { display: flex; flex-wrap: wrap; justify-content: center; gap: 40px; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* ì„¤ì • íŒ¨ë„ */
        .controls { flex: 1; min-width: 380px; max-width: 450px; background: white; padding: 30px; border-radius: 24px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); height: fit-content; }
        .controls h2 { margin-top: 0; font-size: 22px; margin-bottom: 25px; font-weight: 800; }
        .input-group { margin-bottom: 18px; display: flex; flex-direction: column; gap: 8px; }
        label { font-weight: 700; font-size: 13px; color: #666; }
        input, select, textarea { padding: 12px; border: 1px solid #e1e1e1; border-radius: 10px; font-size: 14px; font-family: inherit; }
        textarea { height: 80px; resize: none; line-height: 1.5; }
        .row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }

        /* ì²´í¬ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .checkbox-group { display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 14px; font-weight: 700; color: #444; }
        .checkbox-group input { width: 18px; height: 18px; cursor: pointer; }

        /* ì•„ì´ì½˜ ì„ íƒê¸° */
        .icon-selector { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; }
        .icon-option { border: 2px solid #eee; border-radius: 8px; padding: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
        .icon-option svg, .icon-option img { width: 24px; height: 24px; stroke: #333; fill: none; stroke-width: 2; }
        .icon-option.active { border-color: var(--primary-color); background: var(--primary-color); }
        .icon-option.active svg { stroke: white; }
        .icon-option.active img { filter: brightness(0) invert(1); }

        /* ë²„íŠ¼ */
        .btn-group { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }
        button.primary { background: var(--primary-color); color: white; border: none; padding: 16px; border-radius: 12px; font-weight: 700; cursor: pointer; }
        button.secondary { background: #f1f3f5; color: #475569; border: none; padding: 16px; border-radius: 12px; font-weight: 700; cursor: pointer; }

        /* --- EDM ìº”ë²„ìŠ¤ ë° ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ --- */
        #edm-capture {
            width: 800px; height: 450px; background-color: var(--primary-color);
            display: flex; flex-direction: column; justify-content: flex-end;
            padding: 60px; box-sizing: border-box; color: white; position: relative;
        }
        .edm-icon-display { position: absolute; top: 60px; left: 60px; width: 100px; height: 100px; }
        /* EDM ë‚´ë¶€ ì•„ì´ì½˜ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .edm-icon-display svg, .edm-icon-display img { width: 100%; height: 100%; stroke: white; fill: none; stroke-width: 1.5; stroke-linecap: round; stroke-linejoin: round; display: block; }
        .edm-icon-display img { filter: brightness(0) invert(1); }

        .edm-title { font-size: 52px; font-weight: 800; margin-bottom: 20px; line-height: 1.2; word-break: keep-all; }
        .edm-desc { font-size: 19px; opacity: 0.8; line-height: 1.7; white-space: pre-wrap; }
        .layout-middle { justify-content: center !important; align-items: center !important; text-align: center; }
        .layout-middle .edm-icon-display { position: static; margin-bottom: 30px; }

        /* --- SNS ìº”ë²„ìŠ¤ ìŠ¤íƒ€ì¼ --- */
        #sns-capture {
            width: 500px; height: 500px; background-color: var(--sns-bg-color);
            position: relative; overflow: hidden; display: flex; flex-direction: column; 
            justify-content: center; align-items: center; text-align: center; color: white; transition: 0.3s;
        }
        .sns-bg-img { position: absolute; top:0; left:0; width:100%; height:100%; object-fit: cover; z-index: 1; }
        .sns-overlay { position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); z-index: 2; }
        .sns-content { position: relative; z-index: 3; padding: 40px; width: 100%; box-sizing: border-box; }
        
        /* [ìˆ˜ì •ë¨] SNS ë¡œê³  ë˜í¼ ë° ë‚´ë¶€ ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ */
        .sns-logo-wrapper { 
            position: absolute; 
            z-index: 4; 
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); /* ë¶€ë“œëŸ¬ìš´ ì´ë™ ì• ë‹ˆë©”ì´ì…˜ */
            /* widthëŠ” JS ìŠ¬ë¼ì´ë”ë¡œ ì œì–´ë¨ */
        }
        /* SNS ë‚´ë¶€ ì•„ì´ì½˜ì´ ë˜í¼ í¬ê¸°ì— ë§ì¶°ì§€ë„ë¡ ì„¤ì • */
        .sns-logo-wrapper svg, .sns-logo-wrapper img { 
            width: 100%; 
            height: auto; 
            display: block;
            stroke: white; 
            fill: none; 
            stroke-width: 1.5; 
            stroke-linecap: round; 
            stroke-linejoin: round;
        }
        .sns-logo-wrapper img { filter: brightness(0) invert(1); }

        
        /* ë¡œê³  ìœ„ì¹˜ í´ë˜ìŠ¤ (ì •ìƒ ì‘ë™ í™•ì¸) */
        .pos-tl { top: 35px; left: 35px; } 
        .pos-tr { top: 35px; right: 35px; }
        .pos-bl { bottom: 35px; left: 35px; } 
        .pos-br { bottom: 35px; right: 35px; }
        .pos-cc { top: 50%; left: 50%; transform: translate(-50%, -50%); opacity: 0.5; }

        .sns-tag { display: inline-block; background: #007bff; color: white; padding: 6px 14px; border-radius: 6px; font-size: 14px; font-weight: 700; margin-bottom: 15px; }
        .sns-title { font-size: 42px; font-weight: 800; line-height: 1.3; margin-bottom: 20px; word-break: keep-all; }
        .sns-subtitle { font-size: 18px; opacity: 0.95; white-space: pre-wrap; line-height: 1.6; }

        #sns-capture.ratio-kakao { width: 700px; height: 350px; }
        #sns-capture.ratio-insta { width: 500px; height: 500px; }
        #sns-capture.ratio-youtube { width: 711px; height: 400px; }
        #sns-capture.ratio-story { width: 360px; height: 640px; }
    </style>
</head>
<body>

    <div class="nav-tabs">
        <button class="tab-btn active" onclick="switchTab('edm', this)">EDM ì œì‘ê¸°</button>
        <button class="tab-btn" onclick="switchTab('sns', this)">SNS ì¸ë„¤ì¼ ì œì‘ê¸°</button>
    </div>

    <div id="edm-tab" class="tool-container active">
        <div class="controls">
            <h2>ğŸ“§ EDM í—¤ë” ì œì‘</h2>
            <div class="input-group">
                <label>ì „í†µ ë¡œê³  ë° ì•„ì´ì½˜ ì„ íƒ (SNS ê³µí†µ ì ìš©)</label>
                <div class="icon-selector" id="common-icon-picker"></div>
            </div>
            <div class="input-group">
                <label>ì œëª©</label>
                <input type="text" id="edm-in-title" value="ì²«ê±¸ìŒ: ì‹œìŠ¤í…œ ì‹œì‘í•˜ê¸°">
            </div>
            <div class="input-group">
                <label>ë‚´ìš©</label>
                <textarea id="edm-in-desc">ê³„ì • ìƒì„±ë¶€í„° ë¡œê·¸ì¸, ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •ê¹Œì§€.
íšŒì›ì‚¬ ì‹œìŠ¤í…œ ì´ìš©ì„ ìœ„í•œ ê°€ì¥ ì²« ë‹¨ê³„ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤.</textarea>
            </div>
            <div class="input-group">
                <label>ë ˆì´ì•„ì›ƒ</label>
                <select id="edm-in-layout">
                    <option value="top">ìƒë‹¨í˜• (ì¢Œì¸¡ í•˜ë‹¨ ì •ë ¬)</option>
                    <option value="middle">ì¤‘ì•™í˜• (ê°€ìš´ë° ì •ë ¬)</option>
                </select>
            </div>
            <div class="btn-group">
                <button class="secondary" onclick="randomizeColor('edm-capture')">ğŸ¨ ë°°ê²½ìƒ‰ ëœë¤</button>
                <button class="primary" onclick="saveImage('edm-capture', 'EDM')">ğŸ’¾ ì´ë¯¸ì§€ ì €ì¥í•˜ê¸°</button>
            </div>
        </div>

        <div id="edm-capture">
            <div class="edm-icon-display" id="edm-display-icon"></div>
            <div class="edm-text">
                <div class="edm-title" id="edm-display-title">ì²«ê±¸ìŒ: ì‹œìŠ¤í…œ ì‹œì‘í•˜ê¸°</div>
                <div class="edm-desc" id="edm-display-desc">ê³„ì • ìƒì„±ë¶€í„° ë¡œê·¸ì¸, ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •ê¹Œì§€.
íšŒì›ì‚¬ ì‹œìŠ¤í…œ ì´ìš©ì„ ìœ„í•œ ê°€ì¥ ì²« ë‹¨ê³„ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤.</div>
            </div>
        </div>
    </div>

    <div id="sns-tab" class="tool-container">
        <div class="controls">
            <h2>ğŸ¨ SNS / ì¹´í†¡ ì¸ë„¤ì¼</h2>
            <div class="input-group">
                <label>ì‚¬ì´ì¦ˆ ì„¤ì •</label>
                <select id="sns-in-ratio">
                    <option value="ratio-kakao">ì¹´ì¹´ì˜¤í†¡ ë‹¨í†¡ë°© (2:1)</option>
                    <option value="ratio-insta">ì¸ìŠ¤íƒ€ê·¸ë¨ í”¼ë“œ (1:1)</option>
                    <option value="ratio-youtube">ìœ íŠœë¸Œ/ê¸°íšì•ˆ (16:9)</option>
                    <option value="ratio-story">ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬ (9:16)</option>
                </select>
            </div>
            
            <div class="row">
                <div class="input-group">
                    <label>ë¡œê³  ë…¸ì¶œ</label>
                    <label class="checkbox-group">
                        <input type="checkbox" id="sns-in-logo-show" checked> ë¡œê³  í‘œì‹œí•˜ê¸°
                    </label>
                </div>
                <div class="input-group">
                    <label>ë¡œê³  ìœ„ì¹˜</label>
                    <select id="sns-in-logo-pos">
                        <option value="pos-tl">ì™¼ìª½ ìƒë‹¨</option>
                        <option value="pos-tr">ì˜¤ë¥¸ìª½ ìƒë‹¨</option>
                        <option value="pos-bl">ì™¼ìª½ í•˜ë‹¨</option>
                        <option value="pos-br">ì˜¤ë¥¸ìª½ í•˜ë‹¨</option>
                        <option value="pos-cc">ì¤‘ì•™ (ì›Œí„°ë§ˆí¬)</option>
                    </select>
                </div>
            </div>

            <div class="input-group">
                <label>ë¡œê³  í¬ê¸° ì¡°ì ˆ</label>
                <input type="range" id="sns-in-logo-size" min="50" max="400" value="130">
            </div>

            <div class="input-group"><label>ë°°ê²½ ì´ë¯¸ì§€</label><input type="file" id="sns-in-bg" accept="image/*"></div>
            <div class="input-group"><label>íƒœê·¸</label><input type="text" id="sns-in-tag" value="NOTICE"></div>
            <div class="input-group"><label>ì œëª©</label><textarea id="sns-in-title">ì£¼ìš” ê³µì§€ì‚¬í•­ì„\nì…ë ¥í•´ì£¼ì„¸ìš”</textarea></div>
            <div class="input-group"><label>ì„¤ëª… ë¬¸êµ¬</label><textarea id="sns-in-desc">ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.</textarea></div>
            
            <div class="btn-group">
                <button class="secondary" onclick="randomizeSnsColor()">ğŸ¨ ë°°ê²½ìƒ‰ ëœë¤</button>
                <button class="primary" onclick="saveImage('sns-capture', 'SNS')">ğŸ’¾ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</button>
            </div>
        </div>

        <div id="sns-capture" class="ratio-kakao">
            <div class="sns-logo-wrapper pos-tl" id="sns-logo-display" style="width: 130px;"></div>
            
            <img src="" id="sns-display-bg" class="sns-bg-img" style="display:none;">
            <div class="sns-overlay" id="sns-display-overlay"></div>
            <div class="sns-content">
                <div class="sns-tag" id="sns-display-tag">NOTICE</div>
                <div class="sns-title" id="sns-display-title">ì£¼ìš” ê³µì§€ì‚¬í•­ì„<br>ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                <div class="sns-subtitle" id="sns-display-desc">ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.</div>
            </div>
        </div>
    </div>

    <script>
        const koraiaLogo = 'https://raw.githubusercontent.com/guessKoraia/guessKoraia.github.io/d08aba8f3923f52f2ccd27905355c1610a50c7a4/koraia.svg';

        function switchTab(id, btn) {
            document.querySelectorAll('.tool-container').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id + '-tab').classList.add('active');
            btn.classList.add('active');
        }

        // --- ê³µí†µ ì•„ì´ì½˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ---
        const iconLibrary = {
            koraia: `<img src="${koraiaLogo}" crossorigin="anonymous">`,
            door: '<path d="M15 3H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9M10 12h11m0 0l-4-4m4 4l-4 4"/>',
            lock: '<rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/>',
            bell: '<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/>',
            rocket: '<path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-5c1.62-2.2 5-3 5-3"/><path d="M12 15v5s3.03-.55 5-2c2.2-1.62 3-5 3-5"/>',
            user: '<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/>',
            mail: '<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/>',
            check: '<polyline points="20 6 9 17 4 12"/>',
            info: '<circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/>'
        };

        const picker = document.getElementById('common-icon-picker');
        const edmIcon = document.getElementById('edm-display-icon');
        const snsIcon = document.getElementById('sns-logo-display');

        // ì•„ì´ì½˜ ì„ íƒ ì‹œ EDMê³¼ SNS ë™ì‹œ ì—…ë°ì´íŠ¸
        Object.keys(iconLibrary).forEach((key, i) => {
            const div = document.createElement('div');
            div.className = `icon-option ${i === 0 ? 'active' : ''}`;
            div.innerHTML = key === 'koraia' ? iconLibrary[key] : `<svg viewBox="0 0 24 24">${iconLibrary[key]}</svg>`;
            div.onclick = () => {
                document.querySelectorAll('.icon-option').forEach(el => el.classList.remove('active'));
                div.classList.add('active');
                const content = div.innerHTML;
                edmIcon.innerHTML = content;
                snsIcon.innerHTML = content;
            };
            picker.appendChild(div);
            if(i === 0) { 
                edmIcon.innerHTML = div.innerHTML; 
                snsIcon.innerHTML = div.innerHTML; 
            }
        });

        // EDM í…ìŠ¤íŠ¸ ì—°ë™
        document.getElementById('edm-in-title').oninput = (e) => document.getElementById('edm-display-title').innerText = e.target.value;
        document.getElementById('edm-in-desc').oninput = (e) => document.getElementById('edm-display-desc').innerText = e.target.value;
        document.getElementById('edm-in-layout').onchange = (e) => document.getElementById('edm-capture').className = e.target.value === 'middle' ? 'layout-middle' : '';

        // SNS ë¡œê³  ì»¤ìŠ¤í…€ ë¡œì§
        const snsLogoWrapper = document.getElementById('sns-logo-display');
        
        // 1. ë¡œê³  ë³´ì´ê¸°/ìˆ¨ê¸°ê¸° í† ê¸€
        document.getElementById('sns-in-logo-show').onchange = (e) => {
            snsLogoWrapper.style.display = e.target.checked ? 'flex' : 'none';
        };

        // 2. ë¡œê³  ìœ„ì¹˜ ë° í¬ê¸° [ë²„ê·¸ ìˆ˜ì •ë¨: ë¶ˆí•„ìš”í•œ í´ë˜ìŠ¤ ì œê±°]
        document.getElementById('sns-in-logo-pos').onchange = (e) => snsLogoWrapper.className = 'sns-logo-wrapper ' + e.target.value;
        document.getElementById('sns-in-logo-size').oninput = (e) => snsLogoWrapper.style.width = e.target.value + 'px';

        // 3. SNS ë‚˜ë¨¸ì§€ ë¡œì§
        document.getElementById('sns-in-ratio').onchange = (e) => document.getElementById('sns-capture').className = e.target.value;
        document.getElementById('sns-in-title').oninput = (e) => document.getElementById('sns-display-title').innerHTML = e.target.value.replace(/\n/g, '<br>');
        document.getElementById('sns-in-desc').oninput = (e) => document.getElementById('sns-display-desc').innerText = e.target.value;
        document.getElementById('sns-in-tag').oninput = (e) => document.getElementById('sns-display-tag').innerText = e.target.value;
        document.getElementById('sns-in-opacity').oninput = (e) => document.getElementById('sns-display-overlay').style.background = `rgba(0,0,0,${e.target.value / 10})`;
        
        document.getElementById('sns-in-bg').onchange = (e) => {
            const file = e.target.files[0];
            if(file) {
                const reader = new FileReader();
                reader.onload = (ev) => {
                    const img = document.getElementById('sns-display-bg');
                    img.src = ev.target.result;
                    img.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        };

        function randomizeColor(id) {
            const colors = ['#1a3c34', '#2c3e50', '#2d3436', '#1e272e', '#004d40', '#30336b'];
            document.getElementById(id).style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        }

        function randomizeSnsColor() {
            randomizeColor('sns-capture');
            document.getElementById('sns-display-bg').style.display = 'none';
        }

        function saveImage(targetId, fileName) {
            const btn = event.target;
            const originalText = btn.innerText;
            btn.innerText = "â³ ìƒì„± ì¤‘...";
            html2canvas(document.getElementById(targetId), { scale: 2, useCORS: true }).then(canvas => {
                const link = document.createElement('a');
                link.download = `${fileName}_${Date.now()}.png`;
                link.href = canvas.toDataURL();
                link.click();
                btn.innerText = originalText;
            });
        }
    </script>
</body>
</html>
